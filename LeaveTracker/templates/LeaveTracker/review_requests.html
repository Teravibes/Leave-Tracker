{% extends 'LeaveTracker/base.html' %}

{% block content %}
  {% include 'LeaveTracker/navbar.html' %}

  <div class="container mt-4">
    <h2 class="fw-semibold mb-3">Pending Holiday Requests</h2>

    <div class="pending-requests-wrapper bg-white dark-theme-bg rounded shadow-sm p-4 border">
      <table class="table table-hover align-middle pending-requests-table mb-0">
        <thead class="table-header">
          <tr>
            <th scope="col">Employee</th>
            <th scope="col">Start Date</th>
            <th scope="col">End Date</th>
            <th scope="col">Holiday Type</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for request in pending_requests %}
            <tr>
              <td>{{ request.employee.user.first_name }} {{ request.employee.user.last_name }}</td>
              <td>{{ request.start_date }}</td>
              <td>{{ request.end_date }}</td>
              <td>
                {% if request.is_special %}
                  <span class="badge badge-special">{{ request.special_type.name }}</span>
                {% else %}
                  <span class="badge badge-regular">Regular Holiday</span>
                {% endif %}
              </td>
              <td>
                <div class="d-flex flex-wrap">
                  <form method="POST" class="mr-2 mb-2">
                    {% csrf_token %}
                    <input type="hidden" name="request_id" value="{{ request.id }}">
                    <input type="hidden" name="action" value="approve">
                    <button type="submit" class="btn holiday-action-btn approve-btn">
                      <i class="fas fa-check-circle me-1"></i> Approve
                    </button>
                  </form>
                  <form method="POST" class="d-inline-block">
                    {% csrf_token %}
                    <input type="hidden" name="request_id" value="{{ request.id }}">
                    <input type="hidden" name="action" value="reject">
                    <button type="submit" class="btn holiday-action-btn reject-btn">
                      <i class="fas fa-times-circle me-1"></i> Reject
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-center text-muted py-4">
                No pending holiday requests.
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
